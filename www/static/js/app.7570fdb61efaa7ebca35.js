webpackJsonp([1],{NHnr:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("7+uW"),s=i("NYxO"),a=i("M4fF"),o=i.n(a),l=i("Dd8w"),c=i.n(l),r=i("mvHQ"),m=i.n(r),p=i("/ocq"),d={name:"PageHome",data:function(){return{}},mounted:function(){},computed:c()({},Object(s.b)({is_connected:function(e){return e.is_connected}}))},u={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"app-page page-home d-flex justify-content-center align-items-center"},[t("div",{staticClass:"text-center"},[t("h1",[this._v("Connect4")]),this._v(" "),this.is_connected?t("div",{staticClass:"badge badge-success"},[this._v("Connected")]):t("div",{staticClass:"badge badge-danger"},[this._v("Disconnected")])])])},staticRenderFns:[]},f=i("VU/8")(d,u,!1,null,null,null).exports,g={name:"PageColor",mounted:function(){this.$store.commit("setFeedback",{c:"feedback",p:{type:"color_set",message:"Color is set: "+this.message.p.color}})},data:function(){return{}},computed:c()({background_color:function(){return this.message.p.color}},Object(s.b)({message:function(e){return e.message}}))},h={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"app-page",style:"background-color: "+this.background_color})},staticRenderFns:[]},v=i("VU/8")(g,h,!1,null,null,null).exports,_={name:"PageImage",mounted:function(){console.log("Showing "+this.message.p.image),void 0!=this.message.p&&this.$store.commit("setFeedback",{type:"image_set",message:"Image set: "+this.message.p.image})},data:function(){return{}},computed:c()({background_image:function(){var e="./media/"+this.message.p.image;return console.log("Setting image "+e),e}},Object(s.b)({message:function(e){return e.message}}))},b={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"app-page page-image"},[t("img",{attrs:{src:this.background_image,alt:""}})])},staticRenderFns:[]},C=i("VU/8")(_,b,!1,null,null,null).exports,z={name:"PageVideo",created:function(){},mounted:function(){this.setVideo()},data:function(){return{video_notification:!1}},computed:c()({video_action:function(){return"setVideo"==this.message.c?"load":"playVideo"==this.message.c?"play":"stopVideo"==this.message.c?"stop":null}},Object(s.b)({message:function(e){return e.message}})),watch:{video_action:function(e){if("load"==e)this.setVideo();else if("play"==e){document.getElementById("video").play()}else if("stop"==e){document.getElementById("video").pause()}}},methods:{setVideo:function(){console.log("Setting video ./media/"+this.message.p.video);var e=this,t=document.getElementById("video");if(t.addEventListener("canplaythrough canplay loadedmetadata",function(){e.video_notification=!0,console.log("Ready to Play"),e.$store.commit("setFeedback",{type:"video_ready",message:"Video is ready (event)"})},!1),t.src="./media/"+this.message.p.video,1==this.message.p.fakePreload){t.addEventListener("play",this.handlePlay);var i=t.play();null!==i&&i.catch(function(e){console.log(e.message)}),e.$store.commit("setFeedback",{type:"video_ready",message:"Video is ready (fake preload)"})}},handlePlay:function(){console.log("handlePlay");var e=document.getElementById("video");e.pause(),e.removeEventListener("play",this.handlePlay)}}},y={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"app-page page-video d-flex align-items-center"},[t("video",{staticClass:"w-100",attrs:{src:"",id:"video",preload:"auto",mute:"",controls:"false"}})])}]},w=i("VU/8")(z,y,!1,null,null,null).exports,k={name:"PageText",data:function(){return{}},mounted:function(){this.$store.commit("setFeedback",{c:"feedback",p:{type:"text_set",message:"Text set: "+this.message.p.text}})},computed:c()({text_content:function(){return void 0!=this.message?this.message.p.text:""},textStyle:function(){var e="";return void 0!=this.message&&(void 0!=this.message.p.fontSize&&(e+="font-size: "+this.message.p.fontSize+"px; "),void 0!=this.message.p.color&&(e+="color: "+this.message.p.color+"; ")),e},bodyStyle:function(){var e="";return void 0!=this.message&&void 0!=this.message.p.backgroundColor&&(e+="background-color: "+this.message.p.backgroundColor+"; "),e},font_size:function(){return void 0!=this.message&&void 0!=this.message.p.font_size?this.message.p.font_size:64}},Object(s.b)({message:function(e){return e.message}}))},x={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"app-page page-text d-flex justify-content-center align-items-center",style:this.bodyStyle},[t("div",{style:this.textStyle,domProps:{innerHTML:this._s(this.text_content)}})])},staticRenderFns:[]},P=i("VU/8")(k,x,!1,null,null,null).exports,E=(i("mtWM"),[{filename:"39.mp4",size:42465593,url:"http://forza4.bl8m.it/clips/39.mp4"},{filename:"4.mp4",size:37264589,url:"http://forza4.bl8m.it/clips/4.mp4"},{filename:"24.mp4",size:44189419,url:"http://forza4.bl8m.it/clips/24.mp4"},{filename:"10.mp4",size:42099010,url:"http://forza4.bl8m.it/clips/10.mp4"},{filename:"29.mp4",size:41267081,url:"http://forza4.bl8m.it/clips/29.mp4"},{filename:"35.mp4",size:39062274,url:"http://forza4.bl8m.it/clips/35.mp4"},{filename:"32.mp4",size:43644642,url:"http://forza4.bl8m.it/clips/32.mp4"},{filename:"14.mp4",size:41531245,url:"http://forza4.bl8m.it/clips/14.mp4"},{filename:"36.mp4",size:41226105,url:"http://forza4.bl8m.it/clips/36.mp4"},{filename:"19.mp4",size:42053231,url:"http://forza4.bl8m.it/clips/19.mp4"},{filename:"0.mp4",size:38157442,url:"http://forza4.bl8m.it/clips/0.mp4"},{filename:"8.mp4",size:39671087,url:"http://forza4.bl8m.it/clips/8.mp4"},{filename:"1.mp4",size:36636916,url:"http://forza4.bl8m.it/clips/1.mp4"},{filename:"13.mp4",size:38782305,url:"http://forza4.bl8m.it/clips/13.mp4"},{filename:"28.mp4",size:41750284,url:"http://forza4.bl8m.it/clips/28.mp4"},{filename:"16.mp4",size:41339958,url:"http://forza4.bl8m.it/clips/16.mp4"},{filename:"12.mp4",size:39459209,url:"http://forza4.bl8m.it/clips/12.mp4"},{filename:"17.mp4",size:42527800,url:"http://forza4.bl8m.it/clips/17.mp4"},{filename:"3.mp4",size:37203338,url:"http://forza4.bl8m.it/clips/3.mp4"},{filename:"31.mp4",size:44468080,url:"http://forza4.bl8m.it/clips/31.mp4"},{filename:"22.mp4",size:38135214,url:"http://forza4.bl8m.it/clips/22.mp4"},{filename:"11.mp4",size:40397943,url:"http://forza4.bl8m.it/clips/11.mp4"},{filename:"27.mp4",size:42826241,url:"http://forza4.bl8m.it/clips/27.mp4"},{filename:"30.mp4",size:41416824,url:"http://forza4.bl8m.it/clips/30.mp4"},{filename:"9.mp4",size:42701092,url:"http://forza4.bl8m.it/clips/9.mp4"},{filename:"21.mp4",size:41337095,url:"http://forza4.bl8m.it/clips/21.mp4"},{filename:"37.mp4",size:41763999,url:"http://forza4.bl8m.it/clips/37.mp4"},{filename:"25.mp4",size:43964224,url:"http://forza4.bl8m.it/clips/25.mp4"},{filename:"2.mp4",size:38602433,url:"http://forza4.bl8m.it/clips/2.mp4"},{filename:"5.mp4",size:37763961,url:"http://forza4.bl8m.it/clips/5.mp4"},{filename:"18.mp4",size:42540337,url:"http://forza4.bl8m.it/clips/18.mp4"},{filename:"20.mp4",size:41047118,url:"http://forza4.bl8m.it/clips/20.mp4"},{filename:"34.mp4",size:41854099,url:"http://forza4.bl8m.it/clips/34.mp4"},{filename:"41.mp4",size:39385343,url:"http://forza4.bl8m.it/clips/41.mp4"},{filename:"26.mp4",size:42830045,url:"http://forza4.bl8m.it/clips/26.mp4"},{filename:"6.mp4",size:35598346,url:"http://forza4.bl8m.it/clips/6.mp4"},{filename:"23.mp4",size:40376801,url:"http://forza4.bl8m.it/clips/23.mp4"},{filename:"38.mp4",size:42043117,url:"http://forza4.bl8m.it/clips/38.mp4"},{filename:"7.mp4",size:40806802,url:"http://forza4.bl8m.it/clips/7.mp4"},{filename:"15.mp4",size:37994898,url:"http://forza4.bl8m.it/clips/15.mp4"},{filename:"33.mp4",size:41756968,url:"http://forza4.bl8m.it/clips/33.mp4"},{filename:"40.mp4",size:42371433,url:"http://forza4.bl8m.it/clips/40.mp4"}]),S={name:"PageMedia",mounted:function(){},data:function(){return{media_url:"http://forza4.bl8m.it/server/file_index.php",remote_files:[]}},computed:c()({},Object(s.b)({})),methods:{getMediaList:function(){this.remote_files=E},downloadFile:function(e,t){}}},T={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-page"},[i("div",[i("div",{staticClass:"row"},[i("div",{staticClass:"col-sm-8"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.media_url,expression:"media_url"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.media_url},on:{input:function(t){t.target.composing||(e.media_url=t.target.value)}}})]),e._v(" "),i("div",{staticClass:"col-sm-4"},[i("button",{staticClass:"btn btn-primary",on:{click:e.getMediaList}},[e._v("Carica elenco media")])])]),e._v(" "),i("table",{staticClass:"table table-condensed"},[i("tbody",e._l(e.remote_files,function(t){return i("tr",[i("td",[i("strong",[e._v(e._s(t.filename))])]),e._v(" "),i("td",[i("span",{staticClass:"badge"},[e._v(e._s(t.size))])]),e._v(" "),i("td",[i("button",{staticClass:"btn btn-primary",on:{click:function(i){return e.downloadFile(t.url,t.filename)}}},[e._v("Scarica")])])])}),0)])])])},staticRenderFns:[]},I=i("VU/8")(S,T,!1,null,null,null).exports;n.a.use(p.a);var V=new p.a({routes:[{path:"/:client_id?",name:"PageHome",component:f},{path:"/color",name:"PageColor",component:v},{path:"/image",name:"PageImage",component:C},{path:"/video",name:"PageVideo",component:w},{path:"/text",name:"PageText",component:P},{path:"/media",name:"PageMedia",component:I}]}),A={name:"App",router:V,data:function(){return{connection:null,toolbar_visible:!1,toolbar_command:"",tmp_config:{},current_page:""}},created:function(){},mounted:function(){this.auto_timer=null,this.loadConfig()},methods:{initConnection:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];console.log("Opening connection to "+this.config.endpoint),this.connection=null,this.connection=new WebSocket("ws://"+this.config.endpoint),1==t&&(this.connection.onopen=function(){e.current_page="PageHome",V.push({name:"PageHome"}),e.$store.commit("setIsConnected",!0)},this.connection.onclose=function(){e.current_page="PageHome",V.push({name:"PageHome"}),e.$store.commit("setIsConnected",!1)},this.connection.onmessage=function(t){e.toolbar_command=Date.now().toString()+" > "+t.data;var i=JSON.parse(t.data);switch(e.$store.commit("setMessage",i),i.c){case"setColor":e.current_page="PageColor",V.push({name:e.current_page});break;case"setImage":e.current_page="PageImage",V.push({name:e.current_page});break;case"setVideo":e.current_page="PageVideo",V.push({name:e.current_page});break;case"setText":e.current_page="PageText",V.push({name:e.current_page})}})},closeConnection:function(){console.log("Closing connection"),this.connection=null,this.is_connected=!1},toggleToolbar:function(){console.log("toggleToolbar"),this.toolbar_visible=!this.toolbar_visible},toggleConfig:function(){this.tmp_config=o.a.clone(this.config,!0),$("#modal_config").modal()},loadConfig:function(){console.log("loadConfig from "+(this.has_native_storage?"NATIVE STORAGE":"LOCAL STORAGE"));var e={};if(this.has_native_storage)"NATIVE STORAGE",NativeStorage.getItem("connect4_config",function(t){e.id=t.id,e.endpoint=t.endpoint}),console.log(e);else{"LOCAL STORAGE";var t=window.localStorage.getItem("connect4_config");e=JSON.parse(t)}void 0!=e&&void 0!=e.id&&void 0!=e.endpoint||(console.log("loadConfig: configurazione salvata NON TROVATA"),e={endpoint:"192.168.1.6:9999",id:"Tablet1",autoreconnect_interval:5}),console.log("Parametri"),console.log(this.$route.params),void 0!=this.$route.params.client_id&&(console.log("ID impostato da url: "+this.$route.params.client_id),e.id=this.$route.params.client_id),this.$store.commit("setConfig",e)},saveConfig:function(){var e=o.a.clone(this.tmp_config,!0);if(this.$store.commit("setConfig",e),this.has_native_storage)console.log("saveConfig: salvo la configurazione in NATIVE STORAGE"),NativeStorage.setItem("connect4_config",e);else{console.log("saveConfig: salvo la configurazione in LOCAL STORAGE");var t=m()(e);window.localStorage.setItem("connect4_config",t)}$("#modal_config").modal("hide")}},computed:c()({toolbar_class:function(){return this.toolbar_visible?"expanded":""}},Object(s.b)({is_connected:function(e){return e.is_connected},config:function(e){return e.config},feedback:function(e){return e.feedback}}),{endpoint:function(){return this.config.endpoint},id:function(){return this.config.id},has_native_storage:function(){return"undefined"!=typeof NativeStorage}}),watch:{endpoint:function(e){this.is_connected&&this.closeConnection(),this.initConnection()},is_connected:function(e){0==e?(V.push({name:"PageHome"}),console.log("Timer ENABLED"),this.auto_timer=setInterval(this.initConnection,1e3*this.config.autoreconnect_interval)):(console.log("Timer DISABLED"),clearInterval(this.auto_timer))},feedback:function(e){var t={c:"feedback",i:this.id,p:e};this.connection.send(m()(t))}}},O={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("router-view"),e._v(" "),i("div",{class:"row toolbar  no-gutters "+e.toolbar_class},[e.toolbar_visible?i("div",{staticClass:"col-sm-6"},[i("div",{staticClass:"toolbar-log"},[i("span",{staticClass:"badge badge-primary"},[e._v(e._s(e.config.id))]),e._v(" "),i("span",{staticClass:"badge badge-secondary"},[e._v(e._s(e.current_page))]),e._v(" "),i("span",{class:e.is_connected?"badge badge-success":"badge badge-danger"},[e._v(e._s(e.is_connected?"Connected":"Disconnected"))]),e._v(" "),i("span",{class:e.has_native_storage?"badge badge-success":"badge badge-warning"},[e._v(e._s(e.has_native_storage?"Native Storage":"Local Storage"))])]),e._v(" "),i("div",{staticClass:"toolbar-log"},[i("pre",{staticClass:"d-inline",domProps:{innerHTML:e._s(e.toolbar_command)}})])]):e._e(),e._v(" "),i("div",{staticClass:"col-sm-6 text-right"},[e.toolbar_visible?i("span",[i("router-link",{staticClass:"toolbar-btn",attrs:{to:{name:"PageMedia"}}},[i("i",{staticClass:"fa fa-file-video"})]),e._v(" "),i("a",{staticClass:"toolbar-btn",attrs:{href:"#"},on:{click:function(t){return e.toggleConfig()}}},[i("i",{staticClass:"fa fa-cog"})])],1):e._e(),e._v(" "),e.toolbar_visible?i("a",{staticClass:"toolbar-btn btn-minus",attrs:{href:"#"},on:{click:function(t){return e.toggleToolbar()}}},[i("i",{staticClass:"fa fa-minus"})]):i("a",{staticClass:"toolbar-btn btn-plus",attrs:{href:"#"},on:{click:function(t){return e.toggleToolbar()}}},[i("i",{staticClass:"fa fa-plus"})])])]),e._v(" "),i("div",{staticClass:"modal",attrs:{tabindex:"-1",role:"dialog",id:"modal_config"}},[i("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[i("div",{staticClass:"modal-content"},[e._m(0),e._v(" "),i("div",{staticClass:"modal-body"},[i("div",{staticClass:"row mb-2"},[e._m(1),e._v(" "),i("div",{staticClass:"col-sm-8"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.tmp_config.id,expression:"tmp_config.id"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.tmp_config.id},on:{input:function(t){t.target.composing||e.$set(e.tmp_config,"id",t.target.value)}}})])]),e._v(" "),i("div",{staticClass:"row mb-2"},[e._m(2),e._v(" "),i("div",{staticClass:"col-sm-8"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.tmp_config.endpoint,expression:"tmp_config.endpoint"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.tmp_config.endpoint},on:{input:function(t){t.target.composing||e.$set(e.tmp_config,"endpoint",t.target.value)}}})])]),e._v(" "),i("div",{staticClass:"row mb-2"},[e._m(3),e._v(" "),i("div",{staticClass:"col-sm-8"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.tmp_config.autoreconnect_interval,expression:"tmp_config.autoreconnect_interval"}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:e.tmp_config.autoreconnect_interval},on:{input:function(t){t.target.composing||e.$set(e.tmp_config,"autoreconnect_interval",t.target.value)}}})])]),e._v(" "),e.is_connected?e._e():i("div",{staticClass:"row mb-2"},[i("div",{staticClass:"col-sm-12"},[i("a",{staticClass:"btn",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.initConnection(!1)}}},[e._v("Connetti")])])])]),e._v(" "),i("div",{staticClass:"modal-footer"},[i("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:e.saveConfig}},[e._v("Salva")]),e._v(" "),i("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[e._v("Chiudi")])])])])])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"modal-header"},[t("h5",{staticClass:"modal-title"},[this._v("Configurazione")]),this._v(" "),t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"col-sm-4"},[t("label",[this._v("Id dispositivo")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"col-sm-4"},[t("label",[this._v("Websocket Endpoint")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"col-sm-4"},[t("label",[this._v("Intervallo tra i tentativi di riconnessione (secondi)")])])}]},N=i("VU/8")(A,O,!1,null,null,null).exports,F=(i("lwAK"),i("K3J8"),i("h5AK"),i("C/JF")),L=i("chEw"),R=i("p2fn"),M=i("08EX"),H=i("1bU/");window.$=window.jQuery=i("7t+N"),F.b.add(L.faPlus),F.b.add(R.faMinus),F.b.add(M.faCog),F.b.add(H.faFileVideo),F.a.watch(),n.a.use(s.a),n.a.config.productionTip=!1,new n.a({el:"#app",store:new s.a.Store({state:{is_connected:null,config:{id:null,endpoint:null,autoreconnect_interval:null},message:{},feedback:{}},mutations:{setIsConnected:function(e,t){e.is_connected=t},setConfig:function(e,t){e.config=t},setMessage:function(e,t){e.message=t},setFeedback:function(e,t){e.feedback=t}},getters:{getCommand:function(e){return e.message.c},getParams:function(e){return e.message.p}}}),components:{App:N},template:"<App/>"})},h5AK:function(e,t){},lwAK:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.7570fdb61efaa7ebca35.js.map